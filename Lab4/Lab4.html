<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Лабораторна робота №4 – Варіант 13</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <div class="nav-buttons">
    <a href="https://dmutro-lab.github.io/knu/" class="btn-nav">На головну</a>
  </div>

  <h2>Тестування</h2>

  <form id="testForm">


    <div class="question">
      <p>1. Столиця України?</p>
      <label><input type="radio" name="q1" value="1"> Київ</label><br>
      <label><input type="radio" name="q1" value="0"> Львів</label><br>
      <label><input type="radio" name="q1" value="0"> Одеса</label><br>
      <label><input type="radio" name="q1" value="0"> Харків</label>
    </div>


    <div class="question">
      <p>2. Скільки буде 2+2?</p>
      <label><input type="radio" name="q2" value="0"> 3</label><br>
      <label><input type="radio" name="q2" value="1"> 4</label><br>
      <label><input type="radio" name="q2" value="0"> 5</label><br>
      <label><input type="radio" name="q2" value="0"> 6</label>
    </div>


    <div class="question">
      <p>3. Які кольори є у прапорі України?</p>
      <label><input type="checkbox" name="q3" value="1"> Жовтий</label><br>
      <label><input type="checkbox" name="q3" value="1"> Синій</label><br>
      <label><input type="checkbox" name="q3" value="0"> Червоний</label><br>
      <label><input type="checkbox" name="q3" value="0"> Зелений</label>
    </div>


    <div class="question">
      <p>4. Які мови програмування є компільованими?</p>
      <label><input type="checkbox" name="q4" value="1"> C++</label><br>
      <label><input type="checkbox" name="q4" value="1"> Java</label><br>
      <label><input type="checkbox" name="q4" value="0"> JavaScript</label><br>
      <label><input type="checkbox" name="q4" value="0"> Python</label>
    </div>

    <div class="question">
      <p>5. Який океан найбільший?</p>
      <select name="q5">
        <option value="0">Атлантичний</option>
        <option value="1">Тихий</option>
        <option value="0">Індійський</option>
        <option value="0">Північний Льодовитий</option>
      </select>
    </div>

 
    <div class="question">
      <p>6. Які числа є простими?</p>
      <select name="q6" multiple size="4">
        <option value="1">2</option>
        <option value="1">3</option>
        <option value="0">4</option>
        <option value="0">6</option>
      </select>
     
    </div>

  
    <div class="question">
      <p>7. В якому році проголосили незалежність України?</p>
      <input type="text" name="q7" placeholder="Введіть рік">
    </div>

    <button type="button" onclick="checkTest()">Завершити тестування</button>
  </form>

  <div id="result"></div>

  <script>
   
    document.addEventListener('DOMContentLoaded', function() {
      const select6 = document.querySelector('select[name="q6"]');
      if (!select6) return;

      const isTouch = ('ontouchstart' in window) || (navigator.maxTouchPoints && navigator.maxTouchPoints > 0);

      if (isTouch) {
        
        select6.addEventListener('click', function(e) {
          if (e.target && e.target.tagName === 'OPTION') {
            e.preventDefault();
            e.target.selected = !e.target.selected;
          }
        });
      } else {
        
        select6.addEventListener('mousedown', function(e) {
          if (e.target && e.target.tagName === 'OPTION') {
            e.preventDefault();
            e.target.selected = !e.target.selected;
          }
        });
      }
    });

    function checkTest() {
      const form = document.getElementById('testForm');
      let output = "<table border='1'><tr><th>№</th><th>Запитання</th><th>Відповідь</th><th>Бали</th></tr>";
      let total = 0;

      
      const q1radios = form.querySelectorAll('input[name="q1"]');
      const checked1 = Array.from(q1radios).find(r => r.checked);
      const text1 = checked1 ? checked1.parentNode.textContent.trim() : "Не відповіли";
      const bal1 = checked1 ? parseInt(checked1.value, 10) : 0;
      total += bal1;
      output += `<tr><td>1</td><td>Столиця України?</td><td>${text1}</td><td>${bal1}</td></tr>`;

     
      const q2radios = form.querySelectorAll('input[name="q2"]');
      const checked2 = Array.from(q2radios).find(r => r.checked);
      const text2 = checked2 ? checked2.parentNode.textContent.trim() : "Не відповіли";
      const bal2 = checked2 ? parseInt(checked2.value, 10) : 0;
      total += bal2;
      output += `<tr><td>2</td><td>2+2=?</td><td>${text2}</td><td>${bal2}</td></tr>`;

      const q3boxes = form.querySelectorAll('input[name="q3"]');
      let chosen3 = [];
      let correct3 = 0;
      q3boxes.forEach(cb => {
        if (cb.checked) {
          chosen3.push(cb.parentNode.textContent.trim());
          if (cb.value === "1") correct3++;
        }
      });
      let bal3 = 0;
      if (chosen3.length === 1) bal3 = correct3;       
      else if (chosen3.length === 2) bal3 = correct3;  
      else bal3 = 0;                                   
      total += bal3;
      output += `<tr><td>3</td><td>Кольори прапора України</td><td>${chosen3.join(", ") || "Не відповіли"}</td><td>${bal3}</td></tr>`;

  
      const q4boxes = form.querySelectorAll('input[name="q4"]');
      let chosen4 = [];
      let correct4 = 0;
      q4boxes.forEach(cb => {
        if (cb.checked) {
          chosen4.push(cb.parentNode.textContent.trim());
          if (cb.value === "1") correct4++;
        }
      });
      let bal4 = 0;
      if (chosen4.length === 1) bal4 = correct4;
      else if (chosen4.length === 2) bal4 = correct4;
      else bal4 = 0;
      total += bal4;
      output += `<tr><td>4</td><td>Компільовані мови</td><td>${chosen4.join(", ") || "Не відповіли"}</td><td>${bal4}</td></tr>`;

     
      const q5 = form.querySelector('select[name="q5"]');
      const sel5 = q5.options[q5.selectedIndex];
      const text5 = sel5 ? sel5.text : "Не відповіли";
      const bal5 = q5.value ? parseInt(q5.value, 10) : 0;
      total += bal5;
      output += `<tr><td>5</td><td>Найбільший океан</td><td>${text5}</td><td>${bal5}</td></tr>`;

 
      const q6options = form.querySelectorAll('select[name="q6"] option');
      let chosen6 = [];
      let correct6 = 0;
      let count6 = 0;
      q6options.forEach(opt => {
        if (opt.selected) {
          chosen6.push(opt.text.trim());
          if (opt.value === "1") correct6++;
          count6++;
        }
      });
      let bal6 = 0;
      if (count6 === 1) bal6 = correct6;
      else if (count6 === 2) bal6 = correct6; 
      else bal6 = 0;
      total += bal6;
      output += `<tr><td>6</td><td>Прості числа</td><td>${chosen6.join(", ") || "Не відповіли"}</td><td>${bal6}</td></tr>`;

    
      const q7raw = (form.querySelector('input[name="q7"]')?.value || "").trim();
      const q7num = q7raw.replace(/\D/g, "");
      const bal7 = (q7num === "1991") ? 1 : 0;
      total += bal7;
      output += `<tr><td>7</td><td>Рік незалежності</td><td>${q7raw || "Не відповіли"}</td><td>${bal7}</td></tr>`;

      output += `</table><h3>Загальний бал: ${total}</h3>`;
      document.getElementById("result").innerHTML = output;
    }
  </script>
</body>
</html>
